# 🔹 EC2（Elastic Compute Cloud）概要

**EC2** は、AWSの **IaaS（仮想サーバー）サービス** で、任意の OS をインストールできる仮想サーバーをクラウド上に立てられます。

- **目的**：アプリケーションの実行環境を柔軟に提供
    
- **特徴**：
    
    - オンデマンドで起動・停止可能
        
    - スケーラブル（スケールアップ／スケールアウト）
        
    - セキュリティグループやVPCでネットワーク制御可能
        
    - 多種多様なインスタンスタイプでCPU・メモリ・ストレージを選択可能
        
    - Amazon Machine Image（AMI）で簡単に再現性のあるサーバー作成が可能
        

---

# 🔹 EC2の主要概念（SAA向け）

|項目|説明|
|---|---|
|**インスタンスタイプ**|CPU・メモリ・ストレージ・ネットワーク性能を組み合わせた仮想マシンの種類（例：汎用、コンピューティング最適化、メモリ最適化など）|
|**リージョン・AZ**|リージョン内の複数AZにまたがって配置可能。高可用性・耐障害性の設計に重要|
|**AMI（Amazon Machine Image）**|OS・ソフトウェア設定を含むテンプレート。インスタンス複製やスケーリング時に使用|
|**EBS / インスタンスストア**|永続ボリュームはEBS、揮発性ストレージはインスタンスストア|
|**セキュリティグループ**|仮想ファイアウォール。インバウンド／アウトバウンドルールでアクセス制御|
|**キーペア**|SSH接続用の認証情報（Linux系）|
|**Elastic IP**|固定パブリックIPを割り当て可能|
|**タグ**|リソース管理・コスト管理・アクセス制御に活用|

---

# 🔹 SAAレベルで押さえるポイント

1. **可用性設計**
    
    - **マルチAZ配置**：障害時の冗長性確保
        
    - **Auto Scaling + ELB**：負荷分散とスケーリングを自動化
        
2. **スケーラビリティ**
    
    - **スケールアウト**（インスタンス追加）／**スケールアップ**（インスタンスサイズ変更）
        
    - **スポットインスタンス**：一時的にコスト削減可能
        
3. **セキュリティ**
    
    - IAMロールでアプリに権限付与
        
    - セキュリティグループでポート制御
        
    - OSレベルのセキュリティアップデートも考慮
        
4. **コスト最適化**
    
    - **オンデマンド**：柔軟だが割高
        
    - **リザーブドインスタンス**：1年・3年契約で割安
        
    - **スポットインスタンス**：短期間・割安だが中断リスクあり
        
    - **Savings Plan**：柔軟な料金割引プラン
        
5. **運用管理**
    
    - **CloudWatch**：CPU/メモリ/ディスクIO監視
        
    - **CloudTrail**：API操作ログ監査
        
    - **Systems Manager**：複数インスタンスの一括管理・自動化
        

---

# 🔹 SAPレベル（実務的観点）

- **可用性設計例**
    
    - Webサーバー2台をマルチAZ配置
        
    - ELBで負荷分散
        
    - Auto Scalingでトラフィック増減に応じてインスタンス数を自動調整
        
- **バックアップ・復元**
    
    - EBSスナップショットを利用して定期バックアップ
        
    - AMIから新しいインスタンスを短時間で再構築可能
        
- **セキュリティ運用**
    
    - インスタンス単位でIAMロールを割り当て、S3やDynamoDBアクセス権限を最小権限化
        
- **コスト運用例**
    
    - 基本はオンデマンドで運用
        
    - 夜間や週末はスポットに切替
        
    - リザーブドインスタンスは常時稼働サーバーに活用
        

---

💡 **まとめ**

- EC2は単なる仮想サーバーではなく、**可用性・スケーラビリティ・セキュリティ・コスト最適化を総合的に設計するサービス**
    
- SAAでは「単体の理解」より「要件に応じた構成提案力」が重要
    
- SAPレベルでは「冗長化・監視・自動化・コスト最適化」まで踏み込んだ設計が求められる

# 🔹 EC2 + ELB + Auto Scaling + EBS + AMI のアーキテクチャ

## 1️⃣ アーキテクチャ構成の概要

       `┌────────────┐        │  ELB (ALB) │        └─────┬──────┘              │    ┌─────────┴─────────┐    │                   │ ┌───────┐           ┌───────┐ │ EC2-A │           │ EC2-B │ └───┬───┘           └───┬───┘     │                   │   EBS Volume          EBS Volume`

- **ELB (Application Load Balancer)**
    
    - 受信したリクエストをEC2インスタンスに振り分け
        
    - マルチAZ配置で冗長化
        
    - ヘルスチェックで障害EC2を自動切替
        
- **EC2 + Auto Scaling**
    
    - トラフィックに応じてインスタンス数を自動増減
        
    - スポット・オンデマンドの組み合わせでコスト最適化
        
- **EBS**
    
    - 永続ストレージとしてEC2にアタッチ
        
    - スナップショットでバックアップ、異なるAZに復元可能
        
- **AMI (Amazon Machine Image)**
    
    - EC2のOS・アプリケーション・設定をテンプレート化
        
    - Auto Scalingの新規インスタンス作成時に使用
        

---

## 2️⃣ 設計ポイント（SAAレベル）

|項目|設計上の考慮点|
|---|---|
|**可用性**|EC2を複数AZに展開、ELBで負荷分散。障害AZ発生時もサービス継続|
|**スケーラビリティ**|Auto Scalingでリクエスト量に応じてEC2台数を自動調整|
|**永続化**|データはEBSに保存。EBSスナップショットでバックアップ|
|**再現性**|AMIでインスタンスを簡単に複製・再構築|
|**セキュリティ**|セキュリティグループでポート制御、IAMロールで権限管理|
|**コスト最適化**|スポットインスタンスで一時負荷に対応、オンデマンドで基盤運用|
|**監視**|CloudWatchでCPU・メモリ・ネットワーク監視、アラーム設定|

---

## 3️⃣ 運用イメージ

1. **初期構築**
    
    - AMI作成（OS＋アプリ＋初期設定）
        
    - Auto Scaling Launch TemplateにAMIを指定
        
    - ELBにAuto Scaling Groupを紐付け
        
2. **スケーリング**
    
    - リクエスト増加 → Auto ScalingでEC2を追加
        
    - リクエスト減少 → Auto ScalingでEC2を削除
        
3. **障害対応**
    
    - EC2障害 → ELBのヘルスチェックが検知しトラフィック振替
        
    - EBS故障 → スナップショットから復元し別AZで再アタッチ
        
4. **更新運用**
    
    - アプリ更新 → 新AMI作成
        
    - Auto Scaling Groupを更新 → 段階的に古いEC2を置換
        

---

## 4️⃣ SAPレベルの応用ポイント

- **ローリングアップデート**
    
    - Blue/Greenデプロイでダウンタイムゼロ更新
        
- **マルチリージョン構成**
    
    - 災害対策（DR）としてリージョン間でEC2・ELB・EBSを複製
        
- **コスト管理**
    
    - 監視データに基づきスポットインスタンスの比率を動的に調整
        
- **監視とアラート自動化**
    
    - CloudWatch Alarms + Lambdaで障害時自動復旧
        

---

💡 **まとめ**

- EC2単体では高可用性やスケーラビリティは不十分。
    
- **ELB + Auto Scaling + EBS + AMI** を組み合わせることで、
    
    - 高可用性
        
    - 自動スケーリング
        
    - 永続化
        
    - 再現性
        
    - コスト効率  
        が実現できる。
        
- SAA試験では **この構成を理解し、要件に応じた設計を選択する能力** が問われます。


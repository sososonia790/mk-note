# 🔒 AWSセキュリティサービス（SAAレベル）

## 1. セキュリティの3層視点

1. **インフラ/ネットワーク防御**
    
    - DDoS対策、WAF、ネットワーク侵入防止
        
2. **アプリケーション・データ保護**
    
    - データ暗号化、アクセス制御
        
3. **監視・脅威検知**
    
    - ログ解析、不正アクセス検知
        

---

## 2. 代表的サービス一覧

|サービス|概要|主な用途|
|---|---|---|
|**AWS Shield**|DDoS攻撃防御サービス|Layer3/4攻撃（Standard）、Layer7（Advanced）|
|**AWS WAF**|Webアプリケーションファイアウォール|SQLインジェクション、クロスサイトスクリプト防御|
|**Amazon GuardDuty**|脅威検知サービス（ログ分析ベース）|不正アクセス、異常API操作の検出|
|**AWS Macie**|データ分類・保護（S3向け）|機密情報の検出・アクセス監査|
|**AWS Inspector**|EC2インスタンス脆弱性評価|OS/アプリケーションのセキュリティチェック|
|**AWS Security Hub**|セキュリティアラート統合・可視化|GuardDutyやInspectorなどの結果を統合管理|
|**AWS KMS**|データ暗号化キー管理|暗号化・復号・キー管理|

---

## 3. 各サービスの詳細

### 🔹 AWS Shield

- **Standard**: 無料、自動でAWSインフラを保護
    
- **Advanced**: 有料、詳細レポート・WAF連携、24/7サポート
    
- 主に **ELB, CloudFront, Route53** を保護
    

### 🔹 AWS WAF

- HTTP/HTTPSリクエストをフィルタリング
    
- カスタムルールで攻撃防御
    
- CloudFrontやALBと連携
    

### 🔹 GuardDuty

- **VPC Flow Logs, CloudTrail, DNS Logs** を解析
    
- 異常なAPIコールやマルウェア通信を検知
    
- 自動的に脅威レベルを通知
    

### 🔹 Security Hub

- GuardDuty, Inspector, Macie のアラートを統合
    
- **セキュリティベストプラクティス遵守度チェック** が可能
    

---

## 4. SAA試験でのポイント

|ポイント|説明|
|---|---|
|**DDoS対策**|Shield Standard/Advancedの用途を理解|
|**Web攻撃対策**|WAFとShieldの使い分けを把握|
|**脅威検知**|GuardDutyのログソース（CloudTrail/VPC Flow Logs/DNS）|
|**統合管理**|Security Hubで複数サービスの監査・可視化|
|**暗号化管理**|KMSでデータ保護、IAMポリシーと組み合わせる|

---

## 5. サンプルユースケース：Webアプリのセキュリティ設計

`ユーザー → CloudFront → WAF + Shield → ALB → EC2 / Lambda                                 │                               GuardDuty監視                                 │                           Security Hub統合管理`

- **CloudFront**：静的コンテンツ配信
    
- **WAF + Shield**：Web攻撃・DDoS防御
    
- **GuardDuty**：ログ解析による異常検知
    
- **Security Hub**：全体のアラート統合管理
    
- **KMS**：S3/DynamoDB暗号化キー管理
    

---

💡 まとめ

- **Shield / WAF** → インフラ・アプリ層防御
    
- **GuardDuty / Security Hub** → 監視・脅威検知
    
- **KMS / Macie / Inspector** → データ保護・脆弱性管理
    
- SAA試験では「どの層で、どのサービスを使うか」を問われやすい
- 
# 🌐 フルマネージドWebアプリアーキテクチャ（セキュリティ統合版）

## 1. 使用するサービス

|サービス|役割|
|---|---|
|**CloudFront**|グローバルエッジ配信、DDoS防御（Shield標準と連携）|
|**AWS WAF**|HTTP/HTTPSリクエストのフィルタリング、SQLi/XSS防御|
|**AWS Shield**|DDoS攻撃防御（StandardまたはAdvanced）|
|**ALB**|アプリケーションロードバランサー、HTTPS終端|
|**EC2 / Lambda**|Webアプリケーション実行（サーバレス or EC2）|
|**RDS / DynamoDB**|データ永続化、暗号化（KMS）|
|**GuardDuty**|脅威検知（VPC Flow Logs, CloudTrail, DNSログ）|
|**Security Hub**|GuardDutyやInspectorのアラート統合管理|
|**AWS KMS**|データ暗号化キー管理|
|**AWS Secrets Manager**|DBやAPIキーなどの認証情報管理|

---

## 2. アーキテクチャ構成例（図解イメージ）

`ユーザー    │    ▼ CloudFront (WAF + Shield)    │    ▼ ALB (HTTPS)    │    ├─ EC2 / Lambda (Webアプリ)    │       │    │       └─ RDS / DynamoDB (KMS暗号化)    │    └─ Secrets Manager (DB認証情報管理)     監視・分析: GuardDuty (VPC Flow Logs, CloudTrail, DNSログ)    │ Security Hub (アラート統合管理)`

---

## 3. 高可用性・冗長性ポイント

1. **CloudFront + WAF + Shield**
    
    - グローバルエッジでDDoSやアプリ攻撃防御
        
2. **ALB + EC2/Lambda**
    
    - マルチAZで冗長構成
        
    - Lambdaは自動スケーリングで単一障害点なし
        
3. **RDS / DynamoDB**
    
    - マルチAZ冗長化
        
    - KMSでデータ暗号化
        
4. **Secrets Manager**
    
    - 認証情報の自動ローテーションでセキュリティ向上
        
5. **GuardDuty + Security Hub**
    
    - 不正アクセスや脅威をリアルタイム検知
        
    - アラートを統合して運用効率化
        

---

## 4. SAA試験でのチェックポイント

- **攻撃防御層**: CloudFront + WAF + Shield
    
- **監視・検知層**: GuardDuty + Security Hub
    
- **データ保護**: KMS暗号化 + Secrets Manager
    
- **可用性・冗長性**: ALB + マルチAZ + Lambda自動スケーリング
    
- **サーバレス or フルマネージド** の適材適所設計が理解できるか
    

---

💡 まとめ

- このアーキテクチャは **フルマネージド + サーバレス + 高可用性 + セキュリティ統合** の典型例
    
- SAA試験では **「どの層でどのサービスを使って冗長性・防御・監視を確保するか」** が問われやすい
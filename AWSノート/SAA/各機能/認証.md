# 🔑 IAM（Identity and Access Management）解説

## 1. IAMの基本概念

- **AWSリソースへのアクセス権限を管理するサービス**
    
- **認証（誰がアクセスするか）** と **認可（何ができるか）** を分離して管理
    
- AWSアカウント単位ではなく、**ユーザー・ロール・ポリシー単位で管理可能**
    

---

## 2. 主なIAM要素

|要素|説明|試験ポイント|
|---|---|---|
|**ユーザー（User）**|AWSアカウント内の個人やアプリケーション|ユーザー単位のアクセス権付与|
|**グループ（Group）**|ユーザーをまとめて権限付与|ユーザー管理効率化|
|**ロール（Role）**|ユーザーやサービスに一時的に権限を付与|サーバレスサービスやEC2などで利用|
|**ポリシー（Policy）**|JSONで権限を定義（許可・拒否）|IAMユーザー、グループ、ロールにアタッチ|
|**認証情報（Access Key / Password / MFA）**|認証に必要な情報|アクセスキーはAPI/CLI用、MFAはセキュリティ強化|

---

## 3. ポリシーの種類

### 🔹 AWS管理ポリシー

- AWSが用意した標準ポリシー
    
- 例：`AmazonS3ReadOnlyAccess`
    

### 🔹 カスタマー管理ポリシー

- ユーザー独自に作成
    
- JSON形式で細かく権限を設定可能
    

### 🔹 インラインポリシー

- 特定ユーザーやロールに直接紐付けるポリシー
    
- 再利用性は低いが柔軟に付与可能
    

---

## 4. IAMロールの活用例

### ① EC2への権限付与

- EC2インスタンスにS3アクセス権を付与する場合、IAMユーザーで管理するより安全
    
- **EC2にIAMロールを割り当てる** → インスタンスからS3操作可能
    

### ② Lambdaやサーバレスサービス

- Lambda関数がDynamoDBやS3にアクセスする場合は **IAMロールを関数にアタッチ**
    

### ③ クロスアカウントアクセス

- 別AWSアカウントのリソースを操作する場合、**ロール + 信頼ポリシー** でアクセス可能
    

---

## 5. IAMポリシーの基本構造（JSON例）

`{   "Version": "2012-10-17",   "Statement": [     {       "Effect": "Allow",       "Action": [         "s3:GetObject",         "s3:PutObject"       ],       "Resource": "arn:aws:s3:::my-bucket/*"     }   ] }`

- **Effect**: Allow / Deny
    
- **Action**: 許可する操作
    
- **Resource**: 権限の対象リソース
    

---

## 6. SAA試験での重要ポイント

1. **ユーザー vs ロールの違い**
    
    - ユーザー：長期資格情報（Access Keyなど）を使う
        
    - ロール：一時的権限、EC2やLambdaなどサービス向け
        
2. **最小権限の原則**
    
    - 必要な操作だけ許可する
        
3. **MFAとIAMポリシー連携**
    
    - 高セキュリティ環境では多要素認証と組み合わせ
        
4. **クロスアカウントアクセス**
    
    - 信頼ポリシーで他アカウントからのAssumeRoleを許可
        
5. **サービス間アクセス**
    
    - Lambda → S3、EC2 → DynamoDBなど
        

---

💡 まとめ

- **IAM = 認証（誰が） + 認可（何を）**
    
- **ユーザー・グループ・ロール・ポリシー** の役割を理解
    
- **最小権限・一時権限・クロスアカウントアクセス** が試験頻出
# ☁️ サーバレス（Serverless）とは

## 1. サーバレスの概念

- **サーバー管理不要でアプリケーションを実行できる仕組み**
    
- ユーザーは「コード・イベント・トリガー」に集中できる
    
- AWSがバックエンドのインフラ（サーバー、スケーリング、OS管理）を自動で担当
    
- 特徴：
    
    - **自動スケーリング**（アクセス増加時に自動で実行環境を拡張）
        
    - **従量課金**（使った分だけ支払い）
        
    - **高可用性・耐障害性** が自動で提供される
        

---

## 2. 代表的サーバレスサービス

|サービス|概要|ユースケース|
|---|---|---|
|**AWS Lambda**|イベント駆動型のサーバレスコンピューティング|画像変換、Webhook処理、バッチ処理|
|**Amazon SQS**|メッセージキューサービス（非同期通信）|バックグラウンドジョブの処理、マイクロサービス間通信|
|**Amazon SNS**|Pub/Sub型メッセージ配信サービス|通知、メール・SMS配信、Lambdaトリガー|
|**Amazon EventBridge**|イベントルールによるサービス間連携|SaaSイベント統合、Lambda自動起動|
|**AWS Step Functions**|ワークフローオーケストレーション|Lambda関数の順序制御・エラーハンドリング|
|**API Gateway**|HTTPリクエスト → Lambda呼び出し|サーバレスAPI構築|

---

## 3. サーバレスアーキテクチャの特徴

1. **運用負荷軽減**
    
    - OSパッチ、サーバースペック調整不要
        
2. **自動スケーリング**
    
    - トラフィックに応じてLambdaが自動並列実行
        
3. **コスト効率**
    
    - 従量課金（Lambdaは実行時間・リクエスト数で課金）
        
4. **イベント駆動型**
    
    - S3のオブジェクト作成、DynamoDB更新、API Gatewayリクエストなどがトリガー
        

---

## 4. サーバレスサービスの組み合わせ例

### 例①：画像アップロード自動処理

`ユーザー → S3アップロード → Lambda起動 → 画像圧縮/リサイズ → S3出力`

### 例②：非同期処理（キューを使う）

`API Gateway → Lambda → SQSキューにメッセージ → 別Lambdaが処理`

### 例③：通知・イベント駆動

`DynamoDB更新 → EventBridge → Lambda → SNS通知 → メール/SMS`

---

## 5. SAA試験でのポイント

1. **Lambdaはサーバレスで自動スケーリング・従量課金**
    
2. **SQSは非同期処理、SNSはPub/Sub型通知**
    
3. **イベント駆動アーキテクチャの構築が中心**
    
4. **Lambda + S3 + API Gateway の組み合わせは典型パターン**
    
5. **Step Functionsで複数Lambdaを順序制御可能**
    

---

💡 ポイント整理（SAA視点）

- サーバレス = **サーバー管理不要 + イベント駆動 + 自動スケーリング**
    
- **同期処理** → API Gateway + Lambda
    
- **非同期処理** → SQS + Lambda
    
- **通知系** → SNS + Lambda
    
- **ワークフロー制御** → Step Functions
# ⚖️ サーバレス vs EC2 / ECS / Fargate の選択基準

## 1. 比較表

|項目|EC2|ECS（EC2モード/Fargateモード）|Lambda（サーバレス）|
|---|---|---|---|
|**管理対象**|OS/ミドルウェア/スケーリングも自分で管理|コンテナ管理（EC2モードはインスタンス管理、Fargateは管理不要）|実行コードのみ、インフラ管理不要|
|**スケーリング**|手動 / Auto Scaling|EC2モード：Auto Scaling / Fargate：自動|自動（イベント駆動）|
|**課金モデル**|インスタンス時間単位|EC2モード：インスタンス時間 / Fargate：リソース時間課金|実行時間・リクエスト数に応じた従量課金|
|**起動時間**|数分|数十秒〜数分|数百ミリ秒〜数秒（即時起動）|
|**ユースケース**|長時間稼働するアプリ、カスタムOS/ライブラリ必要な場合|コンテナ化アプリ、複数マイクロサービスの統合|イベント駆動、バッチ処理、短時間ジョブ、APIバックエンド|
|**可用性・冗長化**|自分で設計（AZ/ELB/AutoScaling）|ECS/Fargateで簡易化|AWSが自動でマネージド可用性を提供|
|**運用負荷**|高い|ECS EC2モード：中 / Fargate：低|ほぼゼロ|

---

## 2. 選択のポイント

### 🔹 長時間稼働・カスタムOSが必要な場合

- **EC2**
    
- 例：古いライブラリが必要、DBサーバー、常時稼働アプリ
    

### 🔹 コンテナ化アプリ・マイクロサービス

- **ECS**
    
    - **EC2モード** → コスト最適化、EC2管理あり
        
    - **Fargateモード** → サーバ管理不要、スケーリング自動化
        

### 🔹 イベント駆動・短時間処理

- **Lambda（サーバレス）**
    
    - S3アップロード → 画像処理
        
    - API Gateway → REST API
        
    - バックグラウンドジョブ・非同期処理
        

### 🔹 トラフィック変動が激しい場合

- **Lambda or Fargate**
    
    - 自動スケーリングで高可用・コスト最適
        

### 🔹 高カスタマイズ/長時間バッチ

- **EC2**
    
    - カスタムカーネル、GPU利用など
        

---

## 3. 試験での典型シナリオ例

|シナリオ|推奨コンピューティング|
|---|---|
|短時間ジョブ・トリガー起動|Lambda|
|APIバックエンド・低レイテンシ|Lambda + API Gateway|
|複数コンテナサービスのマイクロサービス|ECS / Fargate|
|常時稼働Webサーバー・高カスタマイズ|EC2|
|高トラフィック変動あり・イベント駆動|Lambda or Fargate|

---

## 4. SAA試験対策ポイント

- **管理負荷・スケーラビリティ・課金モデル・起動時間** の4点を押さえる
    
- **Lambdaはサーバレス・短時間処理向け**
    
- **ECSはコンテナ、Fargateはサーバ管理不要**
    
- **EC2は長時間稼働・カスタム環境向け**
    

---

💡 まとめ

- **短時間・イベント駆動 → Lambda**
    
- **コンテナ化 → ECS / Fargate**
    
- **常時稼働・カスタム環境 → EC2**

# 🌐 サーバレス高可用・冗長アーキテクチャ例

## 1. 利用するAWSサービス

|サービス|役割|
|---|---|
|**CloudFront**|エッジ配信 / 静的コンテンツ配信 / WAFで保護|
|**S3**|静的ファイルの保存（CloudFrontオリジン）|
|**API Gateway**|HTTPリクエストをLambdaへルーティング|
|**Lambda**|イベント駆動の処理（コード実行）|
|**SQS**|非同期処理 / バックプレッシャー吸収 / 冗長化|
|**DynamoDB**|サーバレスNoSQLデータベース / 高可用・マルチAZ|

---

## 2. アーキテクチャ構成例

`ユーザー    │    ▼ CloudFront    │    ├─ S3（静的コンテンツ）    │    └─ API Gateway → Lambda → DynamoDB                       │                       └─ SQS（非同期ジョブ）                            │                            └─ Lambda（ジョブ処理） → DynamoDB更新`

---

## 3. 高可用・冗長化ポイント

1. **CloudFront**
    
    - グローバルエッジでキャッシュ配信 → レイテンシ低減、単一リージョン障害時も配信可能
        
    - WAFでL7攻撃防御
        
2. **S3**
    
    - マルチAZ冗長保存（耐久性11ナインズ）
        
3. **Lambda**
    
    - 自動スケーリング（リクエスト増加時も冗長）
        
    - 複数AZで実行可能 → 単一障害点なし
        
4. **SQS**
    
    - 非同期処理 → Lambda処理遅延やスパイクに耐性
        
    - 冗長性確保（メッセージは複数AZに保存）
        
5. **DynamoDB**
    
    - マルチAZ・リージョンで自動レプリケーション可能
        
    - 高可用で単一障害点なし
        

---

## 4. 流れ（同期・非同期）

### 同期処理

1. ユーザー → CloudFront → API Gateway → Lambda → DynamoDB
    
    - 例：ユーザー登録、リアルタイムデータ取得
        

### 非同期処理

1. LambdaがSQSにメッセージ送信
    
2. 別Lambdaがメッセージを処理 → DynamoDB更新
    
    - 例：メール送信、バッチ処理、動画変換
        

---

## 5. SAA試験で問われやすいポイント

|項目|試験ポイント|
|---|---|
|冗長性|CloudFront + S3 + Lambda + DynamoDBはマルチAZ対応|
|非同期処理|SQSを利用することでLambda処理スパイクに耐える|
|可用性向上|Lambda + SQS + DynamoDB = フルマネージドで単一障害点なし|
|コスト最適化|サーバレス従量課金、未使用時コストゼロ|

---

## 6. まとめ

- **CloudFront + S3** → 静的コンテンツをグローバル配信
    
- **API Gateway + Lambda** → サーバレスで同期処理
    
- **SQS + Lambda** → 非同期処理でスパイク吸収、冗長化
    
- **DynamoDB** → マルチAZ/高可用データ保存
    

---

💡 補足

- このパターンは **イベント駆動 + フルマネージドサービスで高可用** の典型例
    
- SAA試験では「どのサービスで冗長性・耐障害性を確保するか」を問われやすい